<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Bus Ticket Generator</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
body {
  background: #f2f2f2;
  font-family: Arial, sans-serif;
  padding: 20px;
}

/* FORM */
.form-section {
  max-width: 600px;
  margin: auto;
  background: #fff;
  padding: 25px;
  border-radius: 8px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.form-section h2 {
  text-align: center;
}

.form-section label {
  display: block;
  margin-top: 10px;
  font-weight: bold;
}

.form-section input,
.form-section select {
  width: 100%;
  padding: 8px;
  margin-top: 5px;
}

.form-section button {
  width: 48%;
  margin-top: 15px;
  padding: 10px;
  background: #007bff;
  color: #fff;
  border: none;
  cursor: pointer;
}

/* TICKET */
.ticket-section {
  max-width: 360px;
  margin: 30px auto;
  background: #fff;
  padding: 15px;
  border: 2px dashed #000;
  font-family: "Courier New", monospace;
}

.ticket h2 {
  text-align: center;
  font-size: 18px;
  margin-bottom: 8px;
  text-transform: uppercase;
}

.ticket p {
  font-size: 13px;
  margin: 3px 0;
}

.ticket hr {
  border: none;
  border-top: 1px dashed #000;
  margin: 8px 0;
}

.ticket table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 6px;
}

.ticket table th,
.ticket table td {
  font-size: 13px;
  padding: 4px 2px;
  border-bottom: 1px dashed #000;
}

.ticket table th:last-child,
.ticket table td:last-child {
  text-align: right;
}

.text-right {
  text-align: right;
  font-size: 13px;
  font-weight: bold;
}

.ticket small {
  display: block;
  text-align: center;
  margin-top: 8px;
  font-size: 11px;
}
</style>
</head>

<body>

<div class="form-section">
  <h2>Bus Ticket Form</h2>

  <label>Company Name
    <select id="companyName">
      <option>NueGo</option>
      <option>Vikas Travels Jaipur</option>
      <option>Vijay Shakti Travels</option>
      <option>Gajraj Travels</option>
      <option>Rishabh Travels</option>
      <option>Mahadev Travels</option>
      <option>Maharani Travels</option>
      <option>Goldline Super Deluxe</option>
      <option>Rahi Travells</option>
      <option>Ashok Travels Mandsaur</option>
    </select>
  </label>

  <label>Ticket Sr No
    <input id="srNo">
  </label>

  <label>Seat No
    <input id="seatNo">
  </label>

  <label>Name
    <input id="customerName">
  </label>

  <label>From
    <input id="fromLocation">
  </label>

  <label>To
    <input id="toLocation">
  </label>

  <label>Fare
    <input id="fare" type="number">
  </label>

  <label>Date
    <input id="invoiceDate" type="date">
  </label>

  <label>Payment Mode
    <select id="paymentMode">
      <option>CASH</option>
      <option>UPI</option>
    </select>
  </label>

  <button onclick="generateTicket()">Generate</button>
  <button onclick="downloadPDF()">Download PDF</button>
</div>

<div class="ticket-section">
  <div id="ticket" class="ticket">
    <h2 id="displayCompanyName"></h2>
    <hr>

    <p>Sr No: <span id="displaySrNo"></span></p>
    <p>Name: <span id="displayName"></span></p>
    <p>Seat: <span id="displaySeatNo"></span></p>
    <p>Route: <span id="displayFrom"></span> â†’ <span id="displayTo"></span></p>
    <p>Date: <span id="displayInvoiceDate"></span></p>
    <p>Pay Mode: <span id="displayPaymentMode"></span></p>

    <hr>

    <table>
      <tr>
        <th>Description</th>
        <th>Amount</th>
      </tr>
      <tr>
        <td>Bus Fare</td>
        <td id="displayFare"></td>
      </tr>
      <tr>
        <td><strong>Total</strong></td>
        <td id="displayTotal"></td>
      </tr>
    </table>

    <p class="text-right" id="amountWords"></p>
    <small>Thank you & have a safe journey</small>
  </div>
</div>

<script>
function generateTicket() {
  const fare = parseFloat(document.getElementById("fare").value || 0);

  document.getElementById("displayCompanyName").innerText =
    document.getElementById("companyName").value;

  document.getElementById("displaySrNo").innerText =
    document.getElementById("srNo").value;

  document.getElementById("displaySeatNo").innerText =
    document.getElementById("seatNo").value;

  document.getElementById("displayName").innerText =
    document.getElementById("customerName").value;

  document.getElementById("displayFrom").innerText =
    document.getElementById("fromLocation").value;

  document.getElementById("displayTo").innerText =
    document.getElementById("toLocation").value;

  document.getElementById("displayInvoiceDate").innerText =
    document.getElementById("invoiceDate").value;

  document.getElementById("displayPaymentMode").innerText =
    document.getElementById("paymentMode").value;

  document.getElementById("displayFare").innerText = fare.toFixed(2);
  document.getElementById("displayTotal").innerText = fare.toFixed(2);
  document.getElementById("amountWords").innerText =
    "Rupees " + fare.toFixed(2) + " Only";
}

async function downloadPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF("p", "pt", "a4");
  const ticket = document.getElementById("ticket");

  const canvas = await html2canvas(ticket, { scale: 2 });
  const imgData = canvas.toDataURL("image/png");

  const pdfWidth = doc.internal.pageSize.getWidth();
  const imgHeight = (canvas.height * pdfWidth) / canvas.width;

  doc.addImage(imgData, "PNG", 20, 20, pdfWidth - 40, imgHeight);
  doc.save("bus-ticket.pdf");
}
</script>

</body>
</html>
